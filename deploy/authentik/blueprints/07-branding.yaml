# Authentik Blueprint: Branding Configuration
# Custom branding for MadeWithPris.me (Nordic theme)
# Comprehensive PatternFly CSS variable overrides to match app design system
version: 1
metadata:
  name: Branding Configuration
  labels:
    blueprints.goauthentik.io/instantiate: "true"

entries:
  # Brand Configuration
  - model: authentik_brands.brand
    id: madewithprisme-brand
    identifiers:
      domain: !Env [AUTHENTIK_BRAND_DOMAIN, "auth-staging.madewithpris.me"]
    attrs:
      domain: !Env [AUTHENTIK_BRAND_DOMAIN, "auth-staging.madewithpris.me"]
      default: false
      branding_title: !Env [BRAND_TITLE, "MadeWithPris.me"]
      branding_logo: /media/branding/logo.svg
      branding_favicon: /media/branding/favicon.png
      flow_authentication: !Find [authentik_flows.flow, [slug, madewithprisme-authentication]]
      flow_enrollment: !Find [authentik_flows.flow, [slug, madewithprisme-enrollment]]
      flow_recovery: !Find [authentik_flows.flow, [slug, madewithprisme-recovery]]
      flow_user_settings: !Find [authentik_flows.flow, [slug, default-user-settings-flow]]
      branding_custom_css: |
        /* ==========================================================================
           MadeWithPris.me Nordic Theme for Authentik
           Complete PatternFly v5/v6 variable override to match app design system
           ========================================================================== */

        /* --------------------------------------------------------------------------
           CSS Custom Properties (Design Tokens)
           -------------------------------------------------------------------------- */
        :root {
          /* Nordic Color Palette */
          --nordic-50: #f8fafc;
          --nordic-100: #f1f5f9;
          --nordic-200: #e2e8f0;
          --nordic-300: #cbd5e1;
          --nordic-400: #94a3b8;
          --nordic-500: #64748b;
          --nordic-600: #475569;
          --nordic-700: #334155;
          --nordic-800: #1e293b;
          --nordic-900: #0f172a;
          --nordic-950: #020617;

          /* Accent Colors */
          --accent-50: #f0f9ff;
          --accent-100: #e0f2fe;
          --accent-200: #bae6fd;
          --accent-300: #7dd3fc;
          --accent-400: #38bdf8;
          --accent-500: #0ea5e9;
          --accent-600: #0284c7;
          --accent-700: #0369a1;
          --accent-800: #075985;

          /* Semantic Tokens */
          --color-bg: var(--nordic-50);
          --color-surface: #ffffff;
          --color-text: var(--nordic-900);
          --color-text-muted: var(--nordic-500);
          --color-border: var(--nordic-200);
          --color-accent: var(--accent-500);
          --color-accent-hover: var(--accent-600);
          --color-danger: #dc2626;
          --color-success: #16a34a;

          /* --------------------------------------------------------------------------
             PatternFly Global Overrides
             -------------------------------------------------------------------------- */

          /* Typography */
          --pf-v5-global--FontFamily--sans-serif: 'Inter', system-ui, -apple-system, sans-serif;
          --pf-v5-global--FontFamily--heading--sans-serif: 'Inter', system-ui, sans-serif;
          --pf-v5-global--FontSize--sm: 0.875rem;
          --pf-v5-global--FontSize--md: 1rem;
          --pf-v5-global--FontSize--lg: 1.125rem;
          --pf-v5-global--FontSize--xl: 1.25rem;
          --pf-v5-global--FontSize--2xl: 1.5rem;
          --pf-v5-global--FontWeight--normal: 400;
          --pf-v5-global--FontWeight--bold: 600;
          --pf-v5-global--LineHeight--md: 1.5;

          /* Colors - Primary */
          --pf-v5-global--primary-color--100: var(--accent-500);
          --pf-v5-global--primary-color--200: var(--accent-600);
          --pf-v5-global--primary-color--dark-100: var(--accent-600);

          /* Colors - Links */
          --pf-v5-global--link--Color: var(--accent-600);
          --pf-v5-global--link--Color--hover: var(--accent-700);
          --pf-v5-global--link--Color--visited: var(--accent-600);
          --pf-v5-global--link--TextDecoration: none;
          --pf-v5-global--link--TextDecoration--hover: underline;

          /* Colors - Backgrounds */
          --pf-v5-global--BackgroundColor--100: var(--color-surface);
          --pf-v5-global--BackgroundColor--200: var(--nordic-50);
          --pf-v5-global--BackgroundColor--light-100: var(--nordic-100);
          --pf-v5-global--BackgroundColor--dark-100: var(--nordic-900);

          /* Colors - Text */
          --pf-v5-global--Color--100: var(--nordic-900);
          --pf-v5-global--Color--200: var(--nordic-700);
          --pf-v5-global--Color--light-100: var(--nordic-500);
          --pf-v5-global--Color--dark-100: var(--nordic-950);

          /* Colors - Borders */
          --pf-v5-global--BorderColor--100: var(--nordic-200);
          --pf-v5-global--BorderColor--200: var(--nordic-300);
          --pf-v5-global--BorderColor--300: var(--nordic-400);

          /* Border Radius */
          --pf-v5-global--BorderRadius--sm: 0.375rem;
          --pf-v5-global--BorderRadius--lg: 0.5rem;

          /* Shadows */
          --pf-v5-global--BoxShadow--sm: 0 1px 3px 0 rgb(0 0 0 / 0.05), 0 1px 2px -1px rgb(0 0 0 / 0.05);
          --pf-v5-global--BoxShadow--md: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
          --pf-v5-global--BoxShadow--lg: 0 10px 15px -3px rgb(0 0 0 / 0.05), 0 4px 6px -4px rgb(0 0 0 / 0.05);

          /* Spacing */
          --pf-v5-global--spacer--xs: 0.25rem;
          --pf-v5-global--spacer--sm: 0.5rem;
          --pf-v5-global--spacer--md: 1rem;
          --pf-v5-global--spacer--lg: 1.5rem;
          --pf-v5-global--spacer--xl: 2rem;

          /* Transitions */
          --pf-v5-global--TransitionDuration: 150ms;
          --pf-v5-global--TimingFunction: ease-out;

          /* Legacy PatternFly v4 variables for compatibility */
          --pf-global--FontFamily--sans-serif: 'Inter', system-ui, -apple-system, sans-serif;
          --pf-global--primary-color--100: var(--accent-500);
          --pf-global--link--Color: var(--accent-600);
          --pf-global--link--Color--hover: var(--accent-700);
          --pf-global--BorderRadius--sm: 0.375rem;
          --pf-global--BorderRadius--lg: 0.5rem;
        }

        /* --------------------------------------------------------------------------
           Login Page Layout
           -------------------------------------------------------------------------- */
        .pf-v5-c-login,
        .pf-c-login {
          background: linear-gradient(135deg, var(--nordic-50) 0%, var(--nordic-100) 100%);
          min-height: 100vh;
        }

        .pf-v5-c-login__main,
        .pf-c-login__main {
          background: var(--color-surface);
          border-radius: 0.75rem;
          box-shadow: var(--pf-v5-global--BoxShadow--lg);
          border: 1px solid var(--nordic-200);
          max-width: 420px;
        }

        .pf-v5-c-login__header,
        .pf-c-login__header {
          padding-bottom: 1.5rem;
        }

        /* --------------------------------------------------------------------------
           Form Controls
           -------------------------------------------------------------------------- */
        .pf-v5-c-form-control,
        .pf-c-form-control {
          --pf-v5-c-form-control--BorderRadius: 0.5rem;
          --pf-c-form-control--BorderRadius: 0.5rem;
          background: var(--color-surface);
          border: 1px solid var(--nordic-200);
          border-radius: 0.5rem;
          padding: 0.625rem 0.875rem;
          font-size: 0.875rem;
          transition: all 200ms ease-out;
        }

        .pf-v5-c-form-control:hover,
        .pf-c-form-control:hover {
          border-color: var(--nordic-300);
        }

        .pf-v5-c-form-control:focus,
        .pf-v5-c-form-control:focus-within,
        .pf-c-form-control:focus,
        .pf-c-form-control:focus-within {
          border-color: var(--accent-500);
          box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.15);
          outline: none;
        }

        .pf-v5-c-form-control::placeholder,
        .pf-c-form-control::placeholder {
          color: var(--nordic-400);
        }

        /* Form Labels */
        .pf-v5-c-form__label,
        .pf-c-form__label {
          font-size: 0.875rem;
          font-weight: 500;
          color: var(--nordic-700);
          margin-bottom: 0.375rem;
        }

        /* Form Helper Text */
        .pf-v5-c-form__helper-text,
        .pf-c-form__helper-text {
          font-size: 0.75rem;
          color: var(--nordic-500);
          margin-top: 0.375rem;
        }

        /* --------------------------------------------------------------------------
           Buttons
           -------------------------------------------------------------------------- */
        .pf-v5-c-button,
        .pf-c-button {
          font-family: 'Inter', system-ui, sans-serif;
          font-weight: 500;
          border-radius: 0.5rem;
          padding: 0.625rem 1rem;
          transition: all 200ms ease-out;
        }

        /* Primary Button */
        .pf-v5-c-button.pf-m-primary,
        .pf-c-button.pf-m-primary {
          --pf-v5-c-button--m-primary--BackgroundColor: var(--nordic-900);
          --pf-v5-c-button--m-primary--hover--BackgroundColor: var(--nordic-800);
          --pf-c-button--m-primary--BackgroundColor: var(--nordic-900);
          --pf-c-button--m-primary--hover--BackgroundColor: var(--nordic-800);
          background: var(--nordic-900);
          color: white;
          box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
        }

        .pf-v5-c-button.pf-m-primary:hover,
        .pf-c-button.pf-m-primary:hover {
          background: var(--nordic-800);
          box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
          transform: translateY(-1px);
        }

        .pf-v5-c-button.pf-m-primary:focus,
        .pf-c-button.pf-m-primary:focus {
          box-shadow: 0 0 0 3px rgba(15, 23, 42, 0.3);
        }

        /* Secondary/Link Button */
        .pf-v5-c-button.pf-m-link,
        .pf-c-button.pf-m-link,
        .pf-v5-c-button.pf-m-secondary,
        .pf-c-button.pf-m-secondary {
          color: var(--accent-600);
          background: transparent;
        }

        .pf-v5-c-button.pf-m-link:hover,
        .pf-c-button.pf-m-link:hover {
          color: var(--accent-700);
          text-decoration: underline;
        }

        /* Tertiary Button */
        .pf-v5-c-button.pf-m-tertiary,
        .pf-c-button.pf-m-tertiary {
          background: var(--color-surface);
          color: var(--nordic-700);
          border: 1px solid var(--nordic-200);
        }

        .pf-v5-c-button.pf-m-tertiary:hover,
        .pf-c-button.pf-m-tertiary:hover {
          background: var(--nordic-50);
          border-color: var(--nordic-300);
        }

        /* Danger Button */
        .pf-v5-c-button.pf-m-danger,
        .pf-c-button.pf-m-danger {
          background: #dc2626;
        }

        .pf-v5-c-button.pf-m-danger:hover,
        .pf-c-button.pf-m-danger:hover {
          background: #b91c1c;
        }

        /* --------------------------------------------------------------------------
           Social Login Buttons
           -------------------------------------------------------------------------- */
        .pf-v5-c-login__main-footer-links,
        .pf-c-login__main-footer-links {
          display: flex;
          flex-direction: column;
          gap: 0.75rem;
          margin-top: 1.5rem;
          padding-top: 1.5rem;
          border-top: 1px solid var(--nordic-200);
        }

        .pf-v5-c-login__main-footer-links-item-link,
        .pf-c-login__main-footer-links-item-link {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 0.5rem;
          width: 100%;
          padding: 0.625rem 1rem;
          background: var(--color-surface);
          border: 1px solid var(--nordic-200);
          border-radius: 0.5rem;
          color: var(--nordic-700);
          font-weight: 500;
          transition: all 200ms ease-out;
        }

        .pf-v5-c-login__main-footer-links-item-link:hover,
        .pf-c-login__main-footer-links-item-link:hover {
          background: var(--nordic-50);
          border-color: var(--nordic-300);
          transform: translateY(-1px);
          box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05);
        }

        /* --------------------------------------------------------------------------
           Cards
           -------------------------------------------------------------------------- */
        .pf-v5-c-card,
        .pf-c-card {
          background: var(--color-surface);
          border: 1px solid var(--nordic-200);
          border-radius: 0.75rem;
          box-shadow: var(--pf-v5-global--BoxShadow--sm);
        }

        .pf-v5-c-card__header,
        .pf-c-card__header {
          border-bottom: 1px solid var(--nordic-100);
        }

        .pf-v5-c-card__title,
        .pf-c-card__title {
          color: var(--nordic-900);
          font-weight: 600;
        }

        /* --------------------------------------------------------------------------
           Alerts
           -------------------------------------------------------------------------- */
        .pf-v5-c-alert,
        .pf-c-alert {
          border-radius: 0.5rem;
          border-width: 1px;
        }

        .pf-v5-c-alert.pf-m-danger,
        .pf-c-alert.pf-m-danger {
          background: #fef2f2;
          border-color: #fecaca;
          color: #991b1b;
        }

        .pf-v5-c-alert.pf-m-success,
        .pf-c-alert.pf-m-success {
          background: #f0fdf4;
          border-color: #bbf7d0;
          color: #166534;
        }

        .pf-v5-c-alert.pf-m-warning,
        .pf-c-alert.pf-m-warning {
          background: #fffbeb;
          border-color: #fde68a;
          color: #92400e;
        }

        .pf-v5-c-alert.pf-m-info,
        .pf-c-alert.pf-m-info {
          background: var(--accent-50);
          border-color: var(--accent-200);
          color: var(--accent-800);
        }

        /* --------------------------------------------------------------------------
           Title & Typography
           -------------------------------------------------------------------------- */
        .pf-v5-c-title,
        .pf-c-title,
        .pf-v5-c-login__main-header-desc,
        .pf-c-login__main-header-desc {
          color: var(--nordic-900);
          font-family: 'Inter', system-ui, sans-serif;
        }

        .pf-v5-c-title.pf-m-xl,
        .pf-c-title.pf-m-xl {
          font-size: 1.5rem;
          font-weight: 600;
          letter-spacing: -0.025em;
        }

        .pf-v5-c-title.pf-m-lg,
        .pf-c-title.pf-m-lg {
          font-size: 1.25rem;
          font-weight: 600;
        }

        /* --------------------------------------------------------------------------
           Logo
           -------------------------------------------------------------------------- */
        .pf-v5-c-brand,
        .pf-c-brand {
          max-height: 48px;
          margin-bottom: 1.5rem;
        }

        /* --------------------------------------------------------------------------
           Footer Links (Sign up, Forgot password)
           -------------------------------------------------------------------------- */
        .pf-v5-c-login__main-footer-band,
        .pf-c-login__main-footer-band {
          background: var(--nordic-50);
          border-top: 1px solid var(--nordic-200);
          padding: 1rem;
          text-align: center;
        }

        .pf-v5-c-login__main-footer-band-item a,
        .pf-c-login__main-footer-band-item a {
          color: var(--accent-600);
          font-weight: 500;
          transition: color 200ms ease-out;
        }

        .pf-v5-c-login__main-footer-band-item a:hover,
        .pf-c-login__main-footer-band-item a:hover {
          color: var(--accent-700);
          text-decoration: underline;
        }

        /* --------------------------------------------------------------------------
           Checkbox & Radio
           -------------------------------------------------------------------------- */
        .pf-v5-c-check__input,
        .pf-c-check__input {
          accent-color: var(--accent-600);
        }

        .pf-v5-c-check__label,
        .pf-c-check__label {
          color: var(--nordic-700);
          font-size: 0.875rem;
        }

        /* --------------------------------------------------------------------------
           Progress / Loading States
           -------------------------------------------------------------------------- */
        .pf-v5-c-spinner,
        .pf-c-spinner {
          --pf-v5-c-spinner--Color: var(--accent-500);
          --pf-c-spinner--Color: var(--accent-500);
        }

        /* --------------------------------------------------------------------------
           Dividers
           -------------------------------------------------------------------------- */
        .pf-v5-c-divider,
        .pf-c-divider,
        hr {
          border-color: var(--nordic-200);
        }

        /* --------------------------------------------------------------------------
           Focus States (Accessibility)
           -------------------------------------------------------------------------- */
        *:focus-visible {
          outline: 2px solid var(--accent-500);
          outline-offset: 2px;
        }

        /* --------------------------------------------------------------------------
           Smooth Transitions
           -------------------------------------------------------------------------- */
        .pf-v5-c-button,
        .pf-c-button,
        .pf-v5-c-form-control,
        .pf-c-form-control,
        a {
          transition: all 200ms ease-out;
        }

        /* --------------------------------------------------------------------------
           Inter Font Import
           -------------------------------------------------------------------------- */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
