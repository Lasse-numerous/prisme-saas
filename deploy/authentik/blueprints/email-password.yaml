# Authentik Blueprint for Email/Password Authentication
# Enables email/password signup and login alongside social providers
version: 1
metadata:
  name: Email Password Authentication
  labels:
    blueprints.goauthentik.io/instantiate: "true"

entries:
  # Configure identification stage with enrollment and recovery flows
  # This allows users to sign up and reset passwords
  - model: authentik_stages_identification.identificationstage
    id: email-password-identification
    identifiers:
      name: default-authentication-identification
    attrs:
      user_fields:
        - email
        - username
      show_source_labels: true
      # Enable sign up link
      enrollment_flow: !Find [authentik_flows.flow, [slug, default-enrollment-flow]]
      # Enable password recovery link
      recovery_flow: !Find [authentik_flows.flow, [slug, default-recovery-flow]]
