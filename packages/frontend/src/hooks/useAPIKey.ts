/**
 * React hooks for APIKey using urql.
 *
 * ⚠️ AUTO-GENERATED BY PRISM - DO NOT EDIT
 */

import { useQuery, useMutation } from 'urql';
import type { APIKey, APIKeyCreate, APIKeyUpdate, PaginationParams } from '../types/generated';

// Import generated GraphQL operations
import {
  GetAPIKeyQuery,
  ListAPIKeysQuery,  CreateAPIKeyMutation,  UpdateAPIKeyMutation,  DeleteAPIKeyMutation,} from '../graphql';

/** Hook result for single APIKey query */
export interface UseAPIKeyResult {
  data: APIKey | null;
  loading: boolean;
  error: Error | null;
  refetch: () => void;
}

/** Hook result for APIKey list query */
export interface UseAPIKeyListResult {
  data: APIKey[];
  loading: boolean;
  error: Error | null;
  totalCount: number;
  hasNextPage: boolean;
  hasPreviousPage: boolean;
  refetch: () => void;
}

/** Hook result for mutations */
export interface UseAPIKeyMutationsResult {  create: (data: APIKeyCreate) => Promise<APIKey | null>;  update: (id: number, data: APIKeyUpdate) => Promise<APIKey | null>;  remove: (id: number) => Promise<boolean>;  loading: boolean;
  error: Error | null;
}

/**
 * Hook for fetching a single APIKey by ID.
 */
export function useAPIKey(id: number | null): UseAPIKeyResult {
  const [result, reexecute] = useQuery({
    query: GetAPIKeyQuery,
    variables: { id: id! },
    pause: id === null,
  });

  return {
    data: result.data?.apikey ?? null,
    loading: result.fetching,
    error: result.error ?? null,
    refetch: reexecute,
  };
}

/**
 * Hook for fetching a list of APIKeys with pagination.
 */
export function useAPIKeyList(
  pagination?: PaginationParams
): UseAPIKeyListResult {
  const [result, reexecute] = useQuery({
    query: ListAPIKeysQuery,
    variables: {
      pagination: pagination ? {
        page: pagination.page ?? 1,
        pageSize: pagination.pageSize ?? 20,
      } : undefined,
    },
  });

  const connection = result.data?.apiKeys;

  return {
    data: connection?.edges.map((e: { node: APIKey }) => e.node) ?? [],
    loading: result.fetching,
    error: result.error ?? null,
    totalCount: connection?.totalCount ?? 0,
    hasNextPage: connection?.pageInfo.hasNextPage ?? false,
    hasPreviousPage: connection?.pageInfo.hasPreviousPage ?? false,
    refetch: reexecute,
  };
}

/**
 * Hook for APIKey mutations (create, update, delete).
 */
export function useAPIKeyMutations(): UseAPIKeyMutationsResult {  const [createResult, executeCreate] = useMutation(CreateAPIKeyMutation);  const [updateResult, executeUpdate] = useMutation(UpdateAPIKeyMutation);  const [deleteResult, executeDelete] = useMutation(DeleteAPIKeyMutation);
  const loading = createResult.fetching || updateResult.fetching || deleteResult.fetching;
  const error = createResult.error ?? updateResult.error ?? deleteResult.error ?? null;

  return {    create: async (data) => {
      const result = await executeCreate({ input: data });
      return result.data?.createAPIKey ?? null;
    },    update: async (id, data) => {
      const result = await executeUpdate({ id, input: data });
      return result.data?.updateAPIKey ?? null;
    },    remove: async (id) => {
      const result = await executeDelete({ id });
      return result.data?.deleteAPIKey ?? false;
    },    loading,
    error,
  };
}

/**
 * Combined hook for all APIKey operations.
 */
export function useAPIKeys(pagination?: PaginationParams) {
  const list = useAPIKeyList(pagination);
  const mutations = useAPIKeyMutations();

  return {
    ...list,
    ...mutations,
  };
}
